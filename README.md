<p align="center">
  <img src="assets/logo.png" width="600px" alt="Arbitrage Tracker"/>
</p>
<p align="center">A feed of opportunities for short, profitable trades</p>
<hr/>
</a>

<p align=center>
<p align="center">
<a href="https://open.vscode.dev/ricardoebbers/arbitrage-tracker" title="Open in VSCode">
<img src="https://img.shields.io/badge/Open%20in%20VSCode-%23007ACC?label=Code&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAC00lEQVQYGX3BX2iVZRwH8O/ze//t/NkcRzdXmzZzLLYMmyVJUFQgzkQoqOsgAtNu6jK6kqjbIqOErrrTCBUUbBTYuZCMoDE0FZLp3DpnZ9s55313znmf/89TEV1JfT5s6uIG5LlvsPTdKViK8fCzr2H8wGEw1UIpNqgUYkRx38Bajqorb08ateWT62l+NrtxBSH+R0KAdhhbaelqp7X26MTTE9ix58UzG83u+7/l9Q9DEMHKHE4JoNiHf0UEKIvH1zh+lMZsC+ME3ZzDt4FiUtz75NE3viXvDYpbx44AHkjXwShAQIBx7PkGD37NtdsWBAzWGihtYD2QtXsQxkmienu+9MRzl3Yf++wylQaLulWHIXolU76qjI8DBmil0drkn/qocFkbCwsGrbQilXUUz3vo3/PS7PiJL38pPDL10eb68nllHQIiGGfxe231BI1MvlceHk2lyGG9h/UeoSzoZ0i507Kx8mYyMjHth3ZOiz9uIehs+F5x63xN0Tvh0Ni13dMz4Fw8ZJwHwPA30k0JsVF/26SNW7ybQQgBN/wY9OCOzsp89ZD44etro4NbkFQi5FwY4xmMB4wHSDY5XCc7bZr3pmy2CksRFO/CVMb7KzMH5yLbPXDv/CmkLQkqlENjPYwFjAUoSsTPNqRjtjwc5XcXbvZuXv3YxmWoTsrCkcl9Q299/pMqDR9fnDsDFoc14xms97Deg0yaxDpWkKwwl9XW9qulGx9Abr6qPQPP2jCSozJ7/IuuCz9p318aZFEC4wHjAdK9ZEaz3lGh9CxjcR4UBwDevmDT5Re0gxZSw0gBjEy+y7V72ToGbTwsi2JigYMz/hJjACP8I0xAqld1zTtPaa1aCgGMFHCMYB3ASgOwCBLCXxhjeEBYANP5dVe/vddysSh9ABcVgP4IPG8vNL7/6vUQ/8kDcR+YyFf04sIMje6q6t5msnrl6kmRpWf1/ev4E5Tbl9R3VUZRAAAAAElFTkSuQmCC&style=flat-square" alt="Open in VSCode"/>
</a>
<a href="https://github.dev/ricardoebbers/arbitrage-tracker" title="Open in VSCode Web">
<img src="https://img.shields.io/badge/Open%20in%20VSCode%20Web-%23007ACC?label=Code&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAC00lEQVQYGX3BX2iVZRwH8O/ze//t/NkcRzdXmzZzLLYMmyVJUFQgzkQoqOsgAtNu6jK6kqjbIqOErrrTCBUUbBTYuZCMoDE0FZLp3DpnZ9s55313znmf/89TEV1JfT5s6uIG5LlvsPTdKViK8fCzr2H8wGEw1UIpNqgUYkRx38Bajqorb08ateWT62l+NrtxBSH+R0KAdhhbaelqp7X26MTTE9ix58UzG83u+7/l9Q9DEMHKHE4JoNiHf0UEKIvH1zh+lMZsC+ME3ZzDt4FiUtz75NE3viXvDYpbx44AHkjXwShAQIBx7PkGD37NtdsWBAzWGihtYD2QtXsQxkmienu+9MRzl3Yf++wylQaLulWHIXolU76qjI8DBmil0drkn/qocFkbCwsGrbQilXUUz3vo3/PS7PiJL38pPDL10eb68nllHQIiGGfxe231BI1MvlceHk2lyGG9h/UeoSzoZ0i507Kx8mYyMjHth3ZOiz9uIehs+F5x63xN0Tvh0Ni13dMz4Fw8ZJwHwPA30k0JsVF/26SNW7ybQQgBN/wY9OCOzsp89ZD44etro4NbkFQi5FwY4xmMB4wHSDY5XCc7bZr3pmy2CksRFO/CVMb7KzMH5yLbPXDv/CmkLQkqlENjPYwFjAUoSsTPNqRjtjwc5XcXbvZuXv3YxmWoTsrCkcl9Q299/pMqDR9fnDsDFoc14xms97Deg0yaxDpWkKwwl9XW9qulGx9Abr6qPQPP2jCSozJ7/IuuCz9p318aZFEC4wHjAdK9ZEaz3lGh9CxjcR4UBwDevmDT5Re0gxZSw0gBjEy+y7V72ToGbTwsi2JigYMz/hJjACP8I0xAqld1zTtPaa1aCgGMFHCMYB3ASgOwCBLCXxhjeEBYANP5dVe/vddysSh9ABcVgP4IPG8vNL7/6vUQ/8kDcR+YyFf04sIMje6q6t5msnrl6kmRpWf1/ev4E5Tbl9R3VUZRAAAAAElFTkSuQmCC&style=flat-square" alt="Open in VSCode Web"/>
</a>
</p>
<p align="center">
<a href="/kirin"><img src="https://img.shields.io/badge/Elixir-4B275F?style=for-the-badge&logo=elixir&logoColor=white" alt="Elixir"> </a>
<a href="/back"><img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white" alt="Node.js"> </a>
<a href="/front"><img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white" alt="TypeScript"> </a>
<a href="/front"><img src="https://img.shields.io/badge/Angular-DD0031?style=for-the-badge&logo=angular&logoColor=white" alt="Angular"> </a>
<a href="/kirin"><img src="https://img.shields.io/badge/rabbitmq-%23FF6600.svg?&style=for-the-badge&logo=rabbitmq&logoColor=white" alt="RabbitMQ"> </a>
</p>


## Introduction  

This is a Hackathon project for the 2020.2 Distributed Systems (IF1015) class at UFPE.  
It was idealized and built as a team in a single weekend, serving as the grading of each member.  
The project was judged by a team of instructors and tied for 1st place.  

### Context
> Arbitrage describes the act of buying a security in one market and simultaneously selling it in another market at a higher price, thereby enabling investors to profit from the temporary difference in cost per share.

Due to the decentralized nature of cryptocurrency trading, a difference in prices even for a few seconds can result in an opportunity to exploit such a window for profit.  
There are however taxes for each of the markets, making this process harder to happen and detect.

This project then uses free real-time crypto market data streams to detect such opportunities, calculating the taxes and possible profits of every market pairing for Bitcoin.  
The taxes are currently mocked, but can be easily filled with real data as explained in below topics.


## Interface
<img src="assets/ui.png">


## Architecture
### 1. Kirin
Made in Elixir, Kirin is what feeds the entire system with a constant stream of filtered data.  

It gets information from Coincap's websocket, filtering for Bitcoin to USD exchange data.  
After some data manipulation and buffering, it sends the clean data to a RabbitMQ queue for the back-end.  

### 2. Back-End
Using Node.js and RXJS to detect arbitrage opportunities and generate relevant information.  

Using the data from Kirin, it calculates the expected profit considering the transaction costs and taxes of all exchanges.  
Considering some past data on memory, the exchanges are judged according to recent activity and past prices.  
90 seconds of the data are then made available on a websocket as a cold stream.  

### 3. Front-End  
The information is shown in real-time on a page built with TypeScript and Angular.

With the stream of data from the back-end websocket, the information is added to graph and several widgets.
The user can get information on all trades or read more details about one specific exchange pair.
Arbitrage opportunities are highlighted on the top of the list, also showing the opportunity window time.

### Virtual Whiteboard
<img src="assets/board.png">
<a href="assets/architecture-design.excalidraw">Import to Excalidraw</a>

## Usage

The project uses Docker, with the following containers:
- front
- back
- kirin
- rabbitmq

The commands necessary to prepare and initialize them are:
```
cd back && npm ci
cd front && npm ci
docker-compose up -d --build
```

The Front-end can then be accessed at `http://localhost:4200/`

### Customization
You can modify the <a href=".env">.env</a> file in the root of this project to choose which Exchanges will be used from Coincap.  
By default, they are: `binance, huobi, hitbtc, zb, gdax, bitfinex, bitstamp, poloniex, gemini, luno, bitso, therocktrading, coinmate`

At <a href ="back/src/opportunities/exchange_data.js">exchange_data.js</a>, the taxes for each exchange can be modified, but by default every 0.125% tax on buying and selling.  
The taxes can be a fixed cost and/or a percentage.
```js
  "huobi": {
    "buyCost": 0,
    "sellCost": 0,
    "buyTax": 0.00125,
    "sellTax": 0.00125
  },
```

## Team

<a href="https://github.com/jrcamelo">João Camelo - jrsc2</a>  
<a href="https://github.com/lira1705">João Lira - jpls</a>  
<a href="https://github.com/ricardoebbers">Ricardo Ebbers - recl</a>  
